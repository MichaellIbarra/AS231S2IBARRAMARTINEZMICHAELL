<!-- views/registro.ejs -->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Estudiantes</title>
    <link rel="stylesheet" href="/style.css"> <!-- Asegúrate de que tu archivo CSS esté en la carpeta public -->
</head>

<body>

    <h2>Formulario de Registro</h2>

    <form action="/registro" method="post" onsubmit="return validarRegistro();"> <!-- Agregado: onsubmit -->
        <label for="carrera">Carrera:</label>
        <select id="carrera" name="carrera">
            <option value="analisis_sistemas">Análisis de Sistemas</option>
            <option value="produccion_agraria">Producción Agraria</option>
        </select><br>

        <label for="nombres">Nombres:</label>
        <input type="text" id="nombres" name="nombres" required><br>

        <label for="apellidos">Apellidos:</label>
        <input type="text" id="apellidos" name="apellidos" required><br>


        <label for="dni">Número de DNI:</label>
        <input type="text" id="dni" name="dni" required><br>

        <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
        <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required><br>

        <label for="correo_institucional">Correo Institucional:</label>
        <input type="email" id="correo_institucional" name="correo_institucional" required><br>

        <label for="contrasena">Contraseña:</label>
        <input type="password" id="contrasena" name="contrasena" required><br>

        <input type="checkbox" id="terminos_condiciones" name="terminos_condiciones" required>
        <label for="terminos_condiciones">Aceptar los Términos y Condiciones</label><br>

        <input type="submit" value="Registrar">
    </form>
    <script>
        function validarRegistro() {
            var carrera = document.getElementById('carrera').value;
            var nombres = document.getElementById('nombres').value;
            var apellidos = document.getElementById('apellidos').value;
            var dni = document.getElementById('dni').value;
            var fechaNacimiento = document.getElementById('fecha_nacimiento').value;
            var correoInstitucional = document.getElementById('correo_institucional').value;
            var contrasena = document.getElementById('contrasena').value;
            var terminosCondiciones = document.getElementById('terminos_condiciones').checked;

            // Validar que todos los campos estén completos
            if (!carrera || !nombres || !apellidos || !dni || !fechaNacimiento || !correoInstitucional || !contrasena || !terminosCondiciones) {
                alert('Todos los campos deben estar completos.');
                return false;
            }

            // Validar el formato del correo institucional
            if (!correoInstitucional.endsWith('@vallegrande.edu.pe')) {
                alert('El correo institucional debe terminar con @vallegrande.edu.pe');
                return false;
            }

            // Validar que el DNI tenga 8 dígitos
            if (dni.length !== 8 || isNaN(dni)) {
                alert('El número de DNI debe tener 8 dígitos.');
                return false;
            }

            return true;
        }
    </script>
</body>

</html>